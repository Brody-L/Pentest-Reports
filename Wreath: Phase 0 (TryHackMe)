NOTE:
There are two machines on my home network that host projects and stuff I'm working on in my own time -- one of them has a webserver that's port forwarded, so that's your way in if you can find a vulnerability! It's serving a website that's pushed to my git server from my own PC for version control, then cloned to the public facing server. See if you can get into these! My own PC is also on that network, but I doubt you'll be able to get into that as it has protections turned on, doesn't run anything vulnerable, and can't be accessed by the public-facing section of the network. Well, I say PC -- it's technically a repurposed server because I had a spare license lying around, but same difference.

* Two machines
--> web server (Windows) --> port forwarded --> website --> pushed to git server --> cloned to public facing server
--> Personal Computer --> repurposed server --> spare license (Windows)
```
    There are three machines on the network
    There is at least one public facing webserver
    There is a self-hosted git server somewhere on the network
    The git server is internal, so Thomas may have pushed sensitive information into it
    There is a PC running on the network that has antivirus installed, meaning we can hazard a guess that this is likely to be Windows
    By the sounds of it this is likely to be the server variant of Windows, which might work in our favour
    The (assumed) Windows PC cannot be accessed directly from the webserver
```

OS: Linux (centos) 
Web Technology: Apache/2.4.37 OpenSSL/1.1.1c
IP: 10.200.81.200
USERS:
CREDENTIALS:
#####################################################
Community Attack Vectors (To-Try List):


#####################################################
NMAP RESULTS:
PORT      STATE  SERVICE       REASON       VERSION
22/tcp    open   ssh           syn-ack      OpenSSH 8.0 (protocol 2.0)
| ssh-hostkey: 
|   3072 9c:1b:d4:b4:05:4d:88:99:ce:09:1f:c1:15:6a:d4:7e (RSA)
| ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDfKbbFLiRV9dqsrYQifAghp85qmXpYEHf2g4JJqDKUL316TcAoGj62aamfhx5isIJHtQsA0hVmzD+4pVH4r8ANkuIIRs6j9cnBrLGpjk8xz9+BE1Vvd8lmORGxCqTv+9LgrpB7tcfoEkIOSG7zeY182kOR72igUERpy0JkzxJm2gIGb7Caz1s5/ScHEOhGX8VhNT4clOhDc9dLePRQvRooicIsENqQsLckE0eJB7rTSxemWduL+twySqtwN80a7pRzS7dzR4f6fkhVBAhYflJBW3iZ46zOItZcwT2u0wReCrFzxvDxEOewH7YHFpvOvb+Exuf3W6OuSjCHF64S7iU6z92aINNf+dSROACXbmGnBhTlGaV57brOXzujsWDylivWZ7CVVj1gB6mrNfEpBNE983qZskyVk4eTNT5cUD+3I/IPOz1bOtOWiraZCevFYaQR5AxNmx8sDIgo1z4VcxOMhrczc7RC/s3KWcoIkI2cI5+KUnDtaOfUClXPBCgYE50=
|   256 93:55:b4:d9:8b:70:ae:8e:95:0d:c2:b6:d2:03:89:a4 (ECDSA)
| ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBFccvYHwpGWYUsw9mTk/mEvzyrY4ghhX2D6o3n/upTLFXbhJPV6ls4C8O0wH6TyGq7ClV3XpVa7zevngNoqlwzM=
|   256 f0:61:5a:55:34:9b:b7:b8:3a:46:ca:7d:9f:dc:fa:12 (ED25519)
|_ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAINLfVtZHSGvCy3JP5GX0Dgzcxz+Y9In0TcQc3vhvMXCP

80/tcp    open   http          syn-ack      Apache httpd 2.4.37 ((centos) OpenSSL/1.1.1c)
|_http-server-header: Apache/2.4.37 (centos) OpenSSL/1.1.1c
|_http-title: Did not follow redirect to https://thomaswreath.thm
| http-methods: 
|_  Supported Methods: GET HEAD POST OPTIONS

443/tcp   open   ssl/http      syn-ack      Apache httpd 2.4.37 ((centos) OpenSSL/1.1.1c)
| tls-alpn: 
|_  http/1.1
| ssl-cert: Subject: commonName=thomaswreath.thm/organizationName=Thomas Wreath Development/stateOrProvinceName=East Riding Yorkshire/countryName=GB/localityName=Easingwold/emailAddress=me@thomaswreath.thm
| Issuer: commonName=thomaswreath.thm/organizationName=Thomas Wreath Development/stateOrProvinceName=East Riding Yorkshire/countryName=GB/localityName=Easingwold/emailAddress=me@thomaswreath.thm
| Public Key type: rsa
| Public Key bits: 2048
| Signature Algorithm: sha256WithRSAEncryption
| Not valid before: 2022-04-30T00:34:07
| Not valid after:  2023-04-30T00:34:07
| MD5:   f09a 80b3 08c4 a447 c782 1f10 a132 dcad
| SHA-1: 4d92 5c78 ef72 8443 fbe8 435b 6519 bb57 0849 885e
| -----BEGIN CERTIFICATE-----
| MIIELTCCAxWgAwIBAgIUHxykhJCM7lmCDz6Xhx6JWf7kmxswDQYJKoZIhvcNAQEL
| BQAwgaUxCzAJBgNVBAYTAkdCMR4wHAYDVQQIDBVFYXN0IFJpZGluZyBZb3Jrc2hp
| cmUxEzARBgNVBAcMCkVhc2luZ3dvbGQxIjAgBgNVBAoMGVRob21hcyBXcmVhdGgg
| RGV2ZWxvcG1lbnQxGTAXBgNVBAMMEHRob21hc3dyZWF0aC50aG0xIjAgBgkqhkiG
| 9w0BCQEWE21lQHRob21hc3dyZWF0aC50aG0wHhcNMjIwNDMwMDAzNDA3WhcNMjMw
| NDMwMDAzNDA3WjCBpTELMAkGA1UEBhMCR0IxHjAcBgNVBAgMFUVhc3QgUmlkaW5n
| IFlvcmtzaGlyZTETMBEGA1UEBwwKRWFzaW5nd29sZDEiMCAGA1UECgwZVGhvbWFz
| IFdyZWF0aCBEZXZlbG9wbWVudDEZMBcGA1UEAwwQdGhvbWFzd3JlYXRoLnRobTEi
| MCAGCSqGSIb3DQEJARYTbWVAdGhvbWFzd3JlYXRoLnRobTCCASIwDQYJKoZIhvcN
| AQEBBQADggEPADCCAQoCggEBAKGt8k5OrPssMMBhj7YWo6e/IKBbXoEkgz5zjo7u
| cOfNNnMcbr1hUpcX8FY6rGZF5RYnwjSLGqcP1Rhtdlk48dKGtFFR9WQtcvArwXRb
| zkLdA3dgy5rQluyimMlNnCtcMpWjR/TJnLkwQ0FX9BGwdHyha7gc+gnloK00KPw1
| 4hNBj4ML9ar20IaJ2PwYR0v1YBfTpsYWyfphYSKi7oSPqBnheP71Pi4wElatIqGx
| CN53eHTpEzOKmDJVVZo4yKX5tOdvtkwujhtFu20766GMZLokFMLw1nA7jj2Mf4hO
| yu5mWWH4QhDfgPkofO/Y7LLVejNsb2DxuuwJTv7RjjQOvJcCAwEAAaNTMFEwHQYD
| VR0OBBYEFD5CtKkHJ1LI1b6XPuWEgGL0WiXXMB8GA1UdIwQYMBaAFD5CtKkHJ1LI
| 1b6XPuWEgGL0WiXXMA8GA1UdEwEB/wQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEB
| AHWugKjcZAe60yMTVyEBeeuYmnhRnOgpxIhRaw6xX4xOLyN1yo5VwjRP3+g40A56
| 9OpmEQY2J2O/AMAChSsHai8GvuGCkLRSLnJtnyF3IfGDK04sxcOsnlK2EF9o1IkS
| 3J/rgW4RzIWJybkii+MQbs0j4v2Dm7sYd8Ib5Bd5GFLpdUKUpNh1rV2qMgSpu13F
| OV636hOyv2a0a9OWkkEQGA3D+Hf7erVr37xgQJykq8TR3hdNQYzd0Y0FrLIJ4OB7
| Fbaffn4F5ZvPPrNiRBYWqxPlyqNLX++zxKOPFdtgiiZdvBN+5HMgxIEuQbxK57ym
| Wl5pc0gXnc2b2wGlM+b0Tq4=
|_-----END CERTIFICATE-----
|_ssl-date: TLS randomness does not represent time
|_http-server-header: Apache/2.4.37 (centos) OpenSSL/1.1.1c
| http-methods: 
|   Supported Methods: GET POST OPTIONS HEAD TRACE
|_  Potentially risky methods: TRACE
|_http-title: Thomas Wreath | Developer

9090/tcp  closed zeus-admin    conn-refused

10000/tcp open   http          syn-ack      MiniServ 1.890 (Webmin httpd)
|_http-favicon: Unknown favicon MD5: 3B064E37677A90C0462FB019BD1242AB
|_http-title: Site doesn't have a title (text/html; Charset=iso-8859-1).
| http-methods: 
|_  Supported Methods: GET HEAD POST OPTIONS

16001/tcp closed fmsascon      conn-refused

38001/tcp closed ivs-insertion conn-refused

48001/tcp open   http          syn-ack      PHP cli server 5.5 or later
|_http-title: 404 Not Found
| http-methods: 
|_  Supported Methods: GET HEAD POST OPTIONS


#####################################################
Steps Taken():
[+] MiniServ 1.890 (Webmin httpd)
----> CVE-2019-15107
EXPLOIT:
----> https://github.com/foxsin34/WebMin-1.890-Exploit-unauthorized-RCE 
----> code execution as root 
[+] w/ code execution as root, the id_rsa file is used to login via ssh

#####################################################
PIVOT:
[root@prod-serv ~]# arp -a
ip-10-200-81-41.eu-west-1.compute.internal (10.200.81.41) at <incomplete> on eth0
ip-10-200-81-150.eu-west-1.compute.internal (10.200.81.150) at 02:c0:4c:e1:d1:01 [ether] on eth0
ip-10-200-81-173.eu-west-1.compute.internal (10.200.81.173) at <incomplete> on eth0
ip-10-200-81-1.eu-west-1.compute.internal (10.200.81.1) at 02:8c:e0:55:7b:89 [ether] on eth0

cat /etc/resolv.conf
# Generated by NetworkManager
search eu-west-1.compute.internal
nameserver 10.200.0.2


#####################################################
Web Services Enumeration:  

[  +  NIKTO   ]

[  +  WFUZZ  ]

FILES:   /   (Web Root)

DIRECTORIES:  /  (Web Root)

#####################################################
OTHER:  


#####################################################
Take Away Concepts

